# Lease Handling and Accounting Guide

## Purpose
This guide explains how the ERP system captures IFRS 16 leases, derives the related liability and right-of-use (ROU) balances, and produces the accounting entries and reports required for financial close.

## Data Model Overview
- **Lease master data:** IFRS 16 lease contracts capture the commercial context, including the booking identifier, detailed titles, lifecycle dates, and controlling parties such as the superintendent outlet, dealer, and reporting period bounds.【F:erp-system/src/main/java/io/github/erp/domain/IFRS16LeaseContract.java†L41-L115】 Supporting source documents can be attached for audit purposes.【F:erp-system/src/main/java/io/github/erp/domain/IFRS16LeaseContract.java†L117-L164】
- **Liability parameters:** Each lease liability stores the capitalised amount, term, and interest rate that are used to schedule payments, and links directly back to the originating IFRS 16 contract and its amortisation calculation.【F:erp-system/src/main/java/io/github/erp/domain/LeaseLiability.java†L41-L108】
- **Amortisation engine:** The lease amortisation calculation defines the interest assumptions, principal amount, and number of periods that drive the liability amortisation.【F:erp-system/src/main/java/io/github/erp/domain/LeaseAmortizationCalculation.java†L41-L116】 The resulting amortisation schedule is anchored to a UUID identifier and ties the lease contract, liability, and the detailed schedule items together.【F:erp-system/src/main/java/io/github/erp/domain/LeaseAmortizationSchedule.java†L41-L104】
- **Period-specific postings:** Lease liability schedule items carry the period sequence, opening balance, cash payment split into principal and interest, and the closing balances that power period journals.【F:erp-system/src/main/java/io/github/erp/domain/LeaseLiabilityScheduleItem.java†L41-L124】 Each item is tagged with the reporting period metadata and links back to the lease contract and liability.【F:erp-system/src/main/java/io/github/erp/domain/LeaseLiabilityScheduleItem.java†L126-L164】
- **Calendar control:** Lease repayment periods are uniquely identified windows backed by fiscal months, enabling alignment with statutory reporting calendars.【F:erp-system/src/main/java/io/github/erp/domain/LeaseRepaymentPeriod.java†L41-L108】
- **Accounting rules:** Dedicated transaction accounting (TA) rules configure the debit and credit accounts for initial recognition, ongoing interest accruals, and ROU asset recognition for each contract.【F:erp-system/src/main/java/io/github/erp/domain/TALeaseRecognitionRule.java†L41-L124】【F:erp-system/src/main/java/io/github/erp/domain/TALeaseInterestAccrualRule.java†L41-L124】【F:erp-system/src/main/java/io/github/erp/domain/TARecognitionROURule.java†L41-L124】
- **Reporting artefacts:** Posting and by-account reports preserve the generated files, request metadata, and checksum validation for audit trails, keyed by the lease period they summarise.【F:erp-system/src/main/java/io/github/erp/domain/LeaseLiabilityPostingReport.java†L41-L118】【F:erp-system/src/main/java/io/github/erp/domain/LeaseLiabilityByAccountReport.java†L41-L118】

## End-to-End Workflow
1. **Register the contract:** Lease administrators capture a new IFRS 16 lease contract from the *IFRS 16 Lease Contracts* screen, providing booking IDs, lifecycle dates, and linking the appropriate dealer and reporting periods.【F:erp-client/src/main/webapp/app/entities/leases/ifrs-16-lease-contract/list/ifrs-16-lease-contract.component.html†L17-L116】 Supporting documents can be uploaded to the contract record for future reference.【F:erp-system/src/main/java/io/github/erp/domain/IFRS16LeaseContract.java†L117-L164】
2. **Set liability parameters:** Treasury or finance users establish the liability amount, effective interest rate, and amortisation calculation through the *Lease Liabilities* workspace, ensuring the lease is tied to its amortisation model.【F:erp-client/src/main/webapp/app/entities/leases/lease-liability/list/lease-liability.component.html†L17-L116】【F:erp-system/src/main/java/io/github/erp/domain/LeaseLiability.java†L41-L108】 The amortisation calculation object stores the interest rate assumptions and total number of periods that will drive the schedule.【F:erp-system/src/main/java/io/github/erp/domain/LeaseAmortizationCalculation.java†L41-L103】
3. **Generate the schedule:** Once the liability is in place, the system builds amortisation schedules that enumerate each period’s balances and cashflows while referencing the controlling lease and repayment periods.【F:erp-system/src/main/java/io/github/erp/domain/LeaseAmortizationSchedule.java†L41-L104】【F:erp-system/src/main/java/io/github/erp/domain/LeaseLiabilityScheduleItem.java†L41-L164】【F:erp-system/src/main/java/io/github/erp/domain/LeaseRepaymentPeriod.java†L41-L108】 These records provide the source data for journals and analytics.
4. **Configure accounting rules:** Accountants map each lease to its recognition, interest accrual, and ROU posting rules so that generated journals hit the correct general-ledger accounts.【F:erp-system/src/main/java/io/github/erp/domain/TALeaseRecognitionRule.java†L41-L124】【F:erp-system/src/main/java/io/github/erp/domain/TALeaseInterestAccrualRule.java†L41-L124】【F:erp-system/src/main/java/io/github/erp/domain/TARecognitionROURule.java†L41-L124】 Front-end listing pages expose creation and maintenance workflows for these rules, including quick navigation into linked lease contracts and accounts.【F:erp-client/src/main/webapp/app/entities/accounting/ta-recognition-rou-rule/list/ta-recognition-rou-rule.component.html†L17-L116】
5. **Produce period journals:** During close, users raise lease liability posting reports from the dedicated entity screen, uploading or downloading report files and linking the request to the controlling lease period for traceability.【F:erp-client/src/main/webapp/app/entities/leases/lease-liability-posting-report/list/lease-liability-posting-report.component.html†L17-L116】【F:erp-system/src/main/java/io/github/erp/domain/LeaseLiabilityPostingReport.java†L41-L118】 By-account summaries follow the same pattern when detailed ledger-level analytics are required.【F:erp-system/src/main/java/io/github/erp/domain/LeaseLiabilityByAccountReport.java†L41-L118】 Checksums and tamper indicators provide additional assurance over the exported files.

## Accounting Considerations
- **Initial recognition:** The TA lease recognition rule determines which transaction accounts receive the initial debit and credit when the lease is capitalised, binding the rule to a specific contract identifier to prevent mispostings.【F:erp-system/src/main/java/io/github/erp/domain/TALeaseRecognitionRule.java†L41-L124】
- **Interest accrual:** Interest accrual rules provide the counterparty accounts for periodic interest expense versus liability accretion, again scoped per contract through the mandatory lease link and unique UUID identifier.【F:erp-system/src/main/java/io/github/erp/domain/TALeaseInterestAccrualRule.java†L41-L124】
- **ROU asset tracking:** ROU recognition rules manage the asset-side postings, specifying which accounts capture the asset value and contra entries while staying aligned to the originating lease contract.【F:erp-system/src/main/java/io/github/erp/domain/TARecognitionROURule.java†L41-L124】 Combined with the amortisation schedule, these rules enable automated creation of recurring journals for both liability and asset books.

## Operational Tips
- Maintain the fiscal calendar and lease repayment periods before generating schedules to ensure periods are sequenced correctly.【F:erp-system/src/main/java/io/github/erp/domain/LeaseRepaymentPeriod.java†L41-L108】
- Use the built-in search and refresh controls on the Angular entity lists to validate data synchronisation after bulk imports or API-driven updates.【F:erp-client/src/main/webapp/app/entities/leases/ifrs-16-lease-contract/list/ifrs-16-lease-contract.component.html†L23-L44】【F:erp-client/src/main/webapp/app/entities/leases/lease-liability-posting-report/list/lease-liability-posting-report.component.html†L23-L44】
- Leverage the checksum and tamper indicators on generated reports to detect manual file alterations before downstream posting or sharing.【F:erp-system/src/main/java/io/github/erp/domain/LeaseLiabilityPostingReport.java†L73-L101】

