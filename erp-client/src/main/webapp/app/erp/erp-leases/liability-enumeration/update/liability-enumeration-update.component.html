<div class="row justify-content-center">
  <div class="col-8">
    <form [formGroup]="editForm" (ngSubmit)="save()">
      <h2>Run liability enumeration</h2>

      <div class="mb-3">
        <jhi-m21-ifrs16-lease-form-control
          [inputControlLabel]="'Lease contract'"
          [inputValue]="editForm.get('leaseContractId')?.value"
          [disabledInput]="isSaving"
          (valueSelected)="onLeaseContractSelected($event)"
          inputControlLabel='Lease Contract Id'
        >
          <option [ngValue]="editForm.get('leaseContractId')!.value"></option>
        </jhi-m21-ifrs16-lease-form-control>
      </div>

      <div class="mb-3">
        <jhi-m21-lease-payment-upload-form-control
          [inputControlLabel]="'Lease payment upload'"
          [inputValue]="editForm.get('leasePaymentUploadId')?.value"
          [disabledInput]="isSaving"
          [leaseContractId]="selectedLeaseContract?.bookingId"
          (valueSelected)="onLeasePaymentUploadSelected($event)"
        >
          <option [ngValue]="editForm.get('leasePaymentUploadId')!.value"></option>
        </jhi-m21-lease-payment-upload-form-control>
      </div>

      <div class="mb-3">
        <label class="form-label" for="field_interestRate">Interest rate (annual)</label>
        <input type="text" class="form-control" id="field_interestRate" formControlName="interestRate" />
      </div>

      <div class="mb-3">
        <label class="form-label" for="field_timeGranularity">Payment frequency</label>
        <select class="form-select" id="field_timeGranularity" formControlName="timeGranularity">
          <option value="MONTHLY">Monthly</option>
          <option value="QUARTERLY">Quarterly</option>
          <option value="BI_ANNUAL">Bi-Annual</option>
          <option value="YEARLY">Yearly</option>
        </select>
        <small class="form-text text-muted">Discounting is applied monthly; non-monthly payments will include zero-value months in the schedule.</small>
      </div>

      <div class="form-check mb-3">
        <input type="checkbox" class="form-check-input" id="field_active" formControlName="active" />
        <label class="form-check-label" for="field_active">Active</label>
      </div>

      <div class="d-flex justify-content-between">
        <button type="button" class="btn btn-secondary" (click)="previousState()">Cancel</button>
        <button type="submit" class="btn btn-primary" [disabled]="editForm.invalid || isSaving">
          {{ isSaving ? 'Submitting...' : 'Enumerate' }}
        </button>
      </div>
    </form>
  </div>
</div>
